---
title: "Predict Overall Survival Length in Breast Cancer patients using Proteomic Data"
author: "Ngoc Duong - nqd2000"
date: "3/22/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(caret)
library(tidyverse)
library(data.table)
library(viridis)
library(splines)
library(mgcv)
library(ggplot2)
library(pdp)
library(earth)
library(patchwork)
library(nnet)
library(janitor)
library(FNN)
library(ModelMetrics)
library(caret)
library(boot)
library(microbenchmark)
library(broom)
library(corrplot)
library(pls)

knitr::opts_chunk$set(
	echo = TRUE,
	warning = FALSE,
	fig.width = 8, 
  fig.height = 6,
  out.width = "90%"
)
options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)
scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
theme_set(theme_minimal() + theme(legend.position = "bottom"))
```

Import data
```{r}
outcome = read.csv("./breastcancerproteomes/clinical_data_breast_cancer.csv") %>% janitor::clean_names()
proteome = read.csv("./breastcancerproteomes/77_cancer_proteomes_CPTAC_itraq.csv") 

#clean proteome data
#transpose dataset
proteome_tp <- transpose(proteome)

#get row and colnames in order
colnames(proteome_tp) <- proteome$RefSeq_accession_number
proteome_tp$par_id <- colnames(proteome) 

#rearrange data
proteome_clean = as_tibble(proteome_tp) %>% select(par_id, everything()) 

proteome_final = proteome_clean[-c(1:3),] %>% 
  separate(par_id, c("id2","id4","tcga")) %>% #sep id based on 2-digit id and 4-digit id
  select(-tcga)

#clean outcome data 
outcome_clean = outcome %>% 
  filter(gender == "FEMALE") %>% #filter out 1 obs that is male
  separate(complete_tcga_id, c("tcga","id2","id4"), "-") %>% #sep id based on 2-digit id and 4-digit id
  select(-tcga)

#merge data 
bcp_data = left_join(outcome_clean, proteome_final, by = c("id2", "id4"))
```


